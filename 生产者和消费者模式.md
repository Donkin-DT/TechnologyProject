###### ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼ğŸ˜€

ä¸€ä¸ªç”Ÿäº§è€…å’Œä¸€ä¸ªæ¶ˆè´¹è€…

```java
//ç”Ÿäº§è€…(Productor)å°†äº§å“äº¤ç»™åº—å‘˜(Clerk)ï¼Œè€Œæ¶ˆè´¹è€…(Customer)ä»åº—å‘˜å¤„å–èµ°äº§å“ï¼Œåº—å‘˜ä¸€æ¬¡åªèƒ½æŒæœ‰å›ºå®šæ•°é‡çš„äº§å“(æ¯”å¦‚:20ï¼‰ï¼Œå¦‚æœç”Ÿäº§è€…è¯•å›¾ç”Ÿäº§æ›´å¤šçš„äº§å“ï¼Œåº—å‘˜ä¼šå«ç”Ÿäº§è€…åœä¸€ä¸‹ï¼Œå¦‚æœåº—ä¸­æœ‰ç©ºä½æ”¾äº§å“äº†å†é€šçŸ¥ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§ï¼›å¦‚æœåº—ä¸­æ²¡æœ‰äº§å“äº†ï¼Œåº—å‘˜ä¼šå‘Šè¯‰æ¶ˆè´¹è€…ç­‰ä¸€ä¸‹ï¼Œå¦‚æœåº—ä¸­æœ‰äº§å“äº†å†é€šçŸ¥æ¶ˆè´¹è€…æ¥å–èµ°äº§å“

package com.atguigu.thread;

public class Test {
	public static void main(String[] args) {
		WareHouse wh = new WareHouse();
		
		Customer customer = new Customer(wh);
		customer.setName("æè€æ¿");
		customer.start();
		
		Producer producer = new Producer(wh);
		producer.setName("å…‰å¤´å¼º");
		producer.start();
	}
}

class Customer extends Thread{
	WareHouse wh = null;
	
	public Customer(WareHouse wh) {
		this.wh = wh;
	}
	
	@Override
	public void run() {
		while(true) {
			wh.get();
		}
	}
}

class Producer extends Thread{
	WareHouse wh = null;
	
	public Producer(WareHouse wh) {
		this.wh = wh;
	}
	
	@Override
	public void run() {
		while(true) {
			wh.save();
		}
	}
}

class WareHouse{
	int count = 0;
	
	//ç”Ÿäº§è€…ç”Ÿäº§æ–¹æ³•ï¼š
	public synchronized  void save() {
		this.notify();
		
		System.out.println(Thread.currentThread().getName() + "ç å€’äº†ä¸€é¢—æ ‘ï¼Œç°åœ¨åº“å­˜ä¸ºï¼š"  + (++count));
		if(count >= 20) {
			try {
				this.wait();
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}
	
	//æ¶ˆè´¹è€…æ¶ˆè´¹æ–¹æ³•ï¼š
	public synchronized void get() {
		this.notify();
		
		System.out.println(Thread.currentThread().getName() + "è¿èµ°äº†ä¸€æ£µæ ‘ï¼Œç°åœ¨åº“å­˜ä¸ºï¼š" + (--count));
		
		if(count <= 0) {
			try {
				this.wait();
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}
}
```

å¤šä¸ªç”Ÿäº§è€…å’Œå¤šä¸ªæ¶ˆè´¹è€…

```java
package com.atguigu.thread;

public class Test {
	public static void main(String[] args) {
		WareHouse wh = new WareHouse();
		
		Customer cs1 = new Customer(wh);
		Thread t1 = new Thread(cs1);
		t1.setName("æè€æ¿");
		t1.start();
		
		Customer cs2 = new Customer(wh);
		Thread t2 = new Thread(cs2);
		t2.setName("å¼ è€æ¿");
		t2.start();
		
		Producer pr1 = new Producer(wh);
		Thread t4 = new Thread(pr1);
		t4.setName("ç†Šå¤§");
		t4.start();
		
		Producer pr2 = new Producer(wh);
		Thread t5 = new Thread(pr2);
		t5.setName("ç†ŠäºŒ");
		t5.start();
		
	}
}

class Customer implements Runnable{
	WareHouse wh = null;
	
	public Customer(WareHouse wh) {
		this.wh = wh;
	}
	@Override
	public void run() {
		while(true) {
			wh.get();
		}
	}
	
}

class Producer implements Runnable{
	WareHouse wh = null;
	
	public Producer(WareHouse wh) {
		this.wh = wh;
	}

	@Override
	public void run() {
		while(true) {
			wh.save();
		}
	}
	
}

class WareHouse{
	int count = 0;
	
	//ç”Ÿäº§è€…æ–¹æ³•ï¼š
	public synchronized void save() {
		
		while(count >= 20) {
			try {
				this.wait();
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
		
		System.out.println(Thread.currentThread().getName() + "ç æ–­äº†ä¸€æ£µæ ‘å½“å‰åº“å­˜ä¸ºï¼š"+ (++count));
		
		this.notifyAll();//å”¤é†’å…¶ä»–æ‰€æœ‰æ­£åœ¨ç­‰å¾…çº¿ç¨‹ï¼ˆåŒ…å«ç”Ÿäº§è€…çº¿ç¨‹ï¼‰
	}
	
	//æ¶ˆè´¹è€…æ–¹æ³•ï¼š
	public synchronized void get() {
		
		while(count <= 0) {
			try {
				this.wait();
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
		
		System.out.println(Thread.currentThread().getName() + "è¿èµ°äº†ä¸€æ£µæ ‘ï¼Œå½“å‰åº“å­˜ä¸ºï¼š" + (--count));
		
		this.notifyAll();
	}
}
```



